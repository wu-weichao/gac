# 产品需求文档 (PRD) - AI Git 提交信息生成器

## 1. 背景与目标

### 1.1 项目背景
在软件开发团队中，保持一致且高质量的 Git 提交信息 (Commit Message) 对于代码的可维护性、版本回溯和自动化流程（如生成 CHANGELOG）至关重要。然而，手动撰写符合规范（如 Conventional Commits）的提交信息耗时且容易出错，导致提交信息质量参差不齐，降低了 `git log` 的可读性。

### 1.2 目标
开发一款 AI 驱动的 Git 提交信息生成器，旨在无缝集成到开发者现有的 IDE 工作流中。该工具能自动分析代码变更，并生成符合团队规范的、高质量的提交信息，从而：
- **提升效率：** 节省开发者撰写提交信息的时间。
- **统一规范：** 确保所有提交信息都遵循统一的格式和标准。
- **提高质量：** 生成简洁、准确地描述代码变更的提交信息。
- **优化体验：** 对开发者现有工作流的侵入降到最低。

## 2. 用户与场景

### 2.1 目标用户
- **软件开发者：** 团队中的主要代码贡献者，希望快速、规范地提交代码。
- **技术负责人/架构师：** 希望提升团队代码库的可维护性和规范性。

### 2.2 用户故事
- **作为一名开发者，** 我希望在我点击 IDE 的“提交”按钮后，工具能自动帮我生成提交信息，这样我就不必中断思路去思考如何措辞，只需确认即可。
- **作为一名开发者，** 我希望生成的提交信息是准确的，能够反映我的代码改动，并且符合团队的 `feat/fix/docs` 等规范。
- **作为一名技术负责人，** 我希望团队成员都能使用这个工具，这样我们的 Git 历史就会变得清晰、专业，便于代码审查和版本管理。

## 3. 功能需求

### 3.1 核心功能：自动生成提交信息
- **触发方式：** 工具通过 `prepare-commit-msg` Git 钩子自动触发。
- **变更分析：** 工具能自动获取 `git diff --staged` 的内容，作为分析的上下文。
- **AI 生成：** 工具将代码变更发送给大语言模型 (LLM)，并根据预设的 Prompt 生成结构化的提交信息。
- **自动填充：** 生成的提交信息会自动填充到 IDE 的提交信息框中。

### 3.2 配置与自定义
- **Prompt 模板：** 允许团队根据自身需求，自定义用于生成提交信息的 Prompt。
- **模型选择：** 支持配置使用不同的 LLM API（如 OpenAI, Gemini, tongyi, Moonshot 等）。
- **API Key 管理：** 用户可以在本地安全地配置自己的 LLM API Key。

### 3.3 安装与部署
- **一键安装：** 提供简单的安装脚本 (如 `install.sh` for Linux/macOS 和 `install.bat` for Windows)，让开发者可以在项目仓库中快速完成 Git 钩子的配置。

## 4. 非功能需求

- **性能：** 从触发到生成提交信息并填充的整个过程，应在 5 秒内完成，以避免影响开发者的提交体验。
- **可用性：** 无缝集成，对开发者透明，无需学习新的命令或改变操作习惯。
- **安全性：** 用户的代码变更和 API Key 仅在本地处理和通过 HTTPS 发送给 LLM 服务商，不在任何第三方服务器上存储。
- **兼容性：** 兼容所有主流操作系统（Windows, macOS, Linux）和支持 Git 的 IDE（VS Code, JetBrains 系列等）。

## 5. 验收标准

- 开发者在 IDE 中点击提交后，提交信息框能被 AI 生成的内容自动填充。
- 生成的提交信息格式符合 Conventional Commits 规范。
- 生成的提交信息内容与实际的代码变更高度相关。
- 整个过程流畅，没有明显的卡顿或错误。
